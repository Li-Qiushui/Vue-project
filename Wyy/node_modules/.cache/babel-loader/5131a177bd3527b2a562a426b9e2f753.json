{"remainingRequest":"D:\\Project\\Wyy\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\Wyy\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Project\\Wyy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\Wyy\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Project\\Wyy\\src\\components\\Login.vue","mtime":1675125681501},{"path":"D:\\Project\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Project\\Wyy\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1653963798098},{"path":"D:\\Project\\Wyy\\node_modules\\babel-loader\\lib\\index.js","mtime":1653963802592},{"path":"D:\\Project\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Project\\Wyy\\node_modules\\vue-loader\\lib\\index.js","mtime":1653963801905}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Login\",\n  data: function data() {\n    return {\n      input: {\n        phone: '',\n        password: ''\n      },\n      QrimgUrl: '',\n      message: '',\n      qrdialog: false,\n      loginStatus: \"  \"\n    };\n  },\n  mounted: function mounted() {\n    if (localStorage.user) {\n      this.$router.push('./');\n    }\n  },\n  methods: {\n    login: function login(v) {\n      if (!window.localStorage) {\n        alert(\"请更新浏览器\");\n        return false;\n      }\n\n      var main = this;\n\n      if (this.input.phone == '' || this.input.password == '') {\n        this.$message({\n          message: '请完成输入',\n          type: 'warning'\n        });\n      } else {\n        this.axios.get(\"\".concat(this.ApiURl, \"/login/cellphone\"), {\n          params: {\n            phone: this.input.phone,\n            password: this.input.password\n          }\n        }).then(function (res) {\n          console.log(res.data);\n          var data = res.data;\n          main.message = data.message;\n          if (data.code != 200) return false;\n          localStorage.setItem(\"user\", JSON.stringify(data.cookie));\n          main.$router.push('./');\n        }).catch(function (res) {});\n      }\n    },\n    Qrlogin: function Qrlogin() {\n      var main = this;\n      var timestamp1 = Date.parse(new Date());\n      this.axios.get(\"\".concat(this.ApiURl, \"/login/qr/key\"), {\n        params: {\n          time: timestamp1\n        }\n      }).then(function (res) {\n        var qrkey = res.data.data.unikey;\n        main.axios.get(\"\".concat(main.ApiURl, \"/login/qr/create\"), {\n          params: {\n            key: qrkey,\n            qrimg: 1,\n            time: timestamp1\n          }\n        }).then(function (res) {\n          if (res.data.code == 200) {\n            main.qrdialog = true;\n            main.QrimgUrl = res.data.data.qrimg;\n            main.Interval = setInterval(function () {\n              var timestamp1 = Date.parse(new Date());\n              main.axios.get(\"\".concat(main.ApiURl, \"/login/qr/check\"), {\n                params: {\n                  key: qrkey,\n                  time: timestamp1\n                }\n              }).then(function (res) {\n                var code = res.data.code;\n\n                if (code == 801) {\n                  main.loginStatus = res.data.message;\n                } else if (code == 802) {\n                  main.loginStatus = res.data.message;\n                }\n\n                if (code == 803) {\n                  main.loginStatus = res.data.message;\n                  localStorage.setItem(\"user\", JSON.stringify(res.data.cookie));\n                  clearInterval(main.Interval);\n                  main.$router.push('./');\n                }\n\n                console.log(main.loginStatus);\n              });\n            }, 1000);\n          }\n        });\n      });\n    },\n    Closedialog: function Closedialog() {\n      clearInterval(this.Interval);\n    }\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA,EANA;AAOA,MAAA,QAAA,EAAA,KAPA;AAQA,MAAA,WAAA,EAAA;AARA,KAAA;AAUA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,QAAA,YAAA,CAAA,IAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,KAAA,EAAA,eAAA,CAAA,EAAA;AACA,UAAA,CAAA,MAAA,CAAA,YAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA,eAAA,KAAA;AACA;;AACA,UAAA,IAAA,GAAA,IAAA;;AACA,UAAA,KAAA,KAAA,CAAA,KAAA,IAAA,EAAA,IAAA,KAAA,KAAA,CAAA,QAAA,IAAA,EAAA,EAAA;AACA,aAAA,QAAA,CAAA;AACA,UAAA,OAAA,EAAA,OADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,OALA,MAKA;AACA,aAAA,KAAA,CAAA,GAAA,WAAA,KAAA,MAAA,uBAAA;AACA,UAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA,KAAA,KAAA,CAAA,KADA;AAEA,YAAA,QAAA,EAAA,KAAA,KAAA,CAAA;AAFA;AADA,SAAA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA,cAAA,IAAA,GAAA,GAAA,CAAA,IAAA;AACA,UAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA;AACA,cAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA,OAAA,KAAA;AAEA,UAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA;AACA,SAbA,EAaA,KAbA,CAaA,UAAA,GAAA,EAAA,CAAA,CAbA;AAcA;AACA,KA5BA;AA6BA,IAAA,OAAA,EAAA,mBAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,IAAA,EAAA,CAAA;AACA,WAAA,KAAA,CAAA,GAAA,WAAA,KAAA,MAAA,oBAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA;AADA;AADA,OAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA;AACA,QAAA,IAAA,CAAA,KAAA,CAAA,GAAA,WAAA,IAAA,CAAA,MAAA,uBAAA;AACA,UAAA,MAAA,EAAA;AACA,YAAA,GAAA,EAAA,KADA;AAEA,YAAA,KAAA,EAAA,CAFA;AAGA,YAAA,IAAA,EAAA;AAHA;AADA,SAAA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,YAAA,IAAA,CAAA,QAAA,GAAA,IAAA;AACA,YAAA,IAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,YAAA,IAAA,CAAA,QAAA,GAAA,WAAA,CAAA,YAAA;AACA,kBAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,IAAA,EAAA,CAAA;AACA,cAAA,IAAA,CAAA,KAAA,CAAA,GAAA,WAAA,IAAA,CAAA,MAAA,sBAAA;AACA,gBAAA,MAAA,EAAA;AACA,kBAAA,GAAA,EAAA,KADA;AAEA,kBAAA,IAAA,EAAA;AAFA;AADA,eAAA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,oBAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,oBAAA,IAAA,IAAA,GAAA,EAAA;AACA,kBAAA,IAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,iBAFA,MAEA,IAAA,IAAA,IAAA,GAAA,EAAA;AACA,kBAAA,IAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA;;AAAA,oBAAA,IAAA,IAAA,GAAA,EAAA;AACA,kBAAA,IAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,kBAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,kBAAA,aAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,WAAA;AACA,eAlBA;AAmBA,aArBA,EAqBA,IArBA,CAAA;AAsBA;AACA,SAjCA;AAkCA,OAxCA;AA0CA,KA1EA;AA2EA,IAAA,WAAA,EAAA,uBAAA;AACA,MAAA,aAAA,CAAA,KAAA,QAAA,CAAA;AACA;AA7EA;AAnBA,CAAA","sourcesContent":["<template>\r\n    <div class=\"login\">\r\n        <h1>Login</h1>\r\n        <div class=\"input\">\r\n            <el-input placeholder=\"输入手机号\" v-model=\"input.phone\"></el-input>\r\n            <el-input placeholder=\"输入密码\" v-model=\"input.password\" show-password></el-input>\r\n\t\t\t<el-link type=\"primary\" @click=\"Qrlogin()\">二维码登录</el-link>\r\n            <el-button type=\"primary\" @click=\"login()\">登录</el-button>\r\n        </div>\r\n\t\t<el-dialog\r\n\t\t  title=\"扫码登录\"\r\n\t\t  :visible.sync=\"qrdialog\"\r\n\t\t  @close=\"Closedialog\"\r\n\t\t  width=\"50%\"\r\n\t\t  custom-class=\"qr-dialog\"\r\n\t\t  center>\r\n\t\t  <img :src=\"QrimgUrl\" >\r\n\t\t  <p>{{loginStatus}} </p>\r\n\t\t</el-dialog>\r\n        <p v-if=\"message != ''\">{{message}}</p>\r\n    </div>\n</template>\n\n<script>\r\n    export default{\r\n        name:\"Login\",\r\n        data(){\r\n            return{\r\n                input:{\r\n                    phone:'',\r\n                    password:''\r\n                },\r\n\t\t\t\tQrimgUrl:'',\r\n                message:'',\r\n\t\t\t\tqrdialog:false,\r\n\t\t\t\tloginStatus:\"  \"\r\n            }\r\n        },\r\n        mounted() {\r\n            if(localStorage.user){\r\n                this.$router.push('./')\r\n            }\r\n        },\r\n        methods:{\r\n            login:function(v){\r\n                if(!window.localStorage){\r\n                    alert(\"请更新浏览器\");\r\n                    return false;\r\n                }\r\n                let main = this;\r\n                if(this.input.phone == '' || this.input.password == ''){\r\n                    this.$message({\r\n                        message:'请完成输入',\r\n                        type:'warning' \r\n                    })\r\n                }else{\r\n                    this.axios.get(`${this.ApiURl}/login/cellphone`,{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t    phone:this.input.phone,\r\n\t\t\t\t\t\t    password:this.input.password\r\n\t\t\t\t\t\t}\r\n                    }).then(function(res){\r\n                        console.log(res.data);\r\n                        const data = res.data;\r\n                        main.message = data.message;\r\n                        if(data.code != 200) return false;\r\n                        \r\n                        localStorage.setItem(\"user\",JSON.stringify(data.cookie));\r\n                        main.$router.push('./');\r\n                    }).catch(function(res){})\r\n                }\r\n            },\r\n\t\t\tQrlogin:function(){\r\n\t\t\t\tlet main = this;\r\n\t\t\t\tlet timestamp1 = Date.parse(new Date())\r\n\t\t\t\tthis.axios.get(`${this.ApiURl}/login/qr/key`,{\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\ttime:timestamp1\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\tlet qrkey = res.data.data.unikey;\r\n\t\t\t\t\tmain.axios.get(`${main.ApiURl}/login/qr/create`,{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t    key:qrkey,\r\n\t\t\t\t\t\t\tqrimg:1,\r\n\t\t\t\t\t\t\ttime:timestamp1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\tmain.qrdialog = true\r\n\t\t\t\t\t\t\tmain.QrimgUrl = res.data.data.qrimg\r\n\t\t\t\t\t\t\tmain.Interval = setInterval(function() {\r\n\t\t\t\t\t\t\t\tlet timestamp1 = Date.parse(new Date())\r\n\t\t\t\t\t\t\t\tmain.axios.get(`${main.ApiURl}/login/qr/check`,{\r\n\t\t\t\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\t\t\t    key:qrkey,\r\n\t\t\t\t\t\t\t\t\t\ttime:timestamp1\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\t\t\t\t\tlet code = res.data.code;\r\n\t\t\t\t\t\t\t\t\tif(code == 801){\r\n\t\t\t\t\t\t\t\t\t\tmain.loginStatus = res.data.message\r\n\t\t\t\t\t\t\t\t\t}else if(code == 802){\r\n\t\t\t\t\t\t\t\t\t\tmain.loginStatus = res.data.message\r\n\t\t\t\t\t\t\t\t\t}if(code == 803){\r\n\t\t\t\t\t\t\t\t\t\tmain.loginStatus = res.data.message\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"user\",JSON.stringify(res.data.cookie));\r\n\t\t\t\t\t\t\t\t\t\tclearInterval(main.Interval)\r\n\t\t\t\t\t\t\t\t\t\tmain.$router.push('./');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tconsole.log(main.loginStatus)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tClosedialog:function(){\r\n\t\t\t\tclearInterval(this.Interval)\r\n\t\t\t}\r\n        }\r\n    }\n</script>\n\n<style>\r\n    .login{\r\n        width: 100%;\r\n\t\tmax-width: 450px;\r\n        height: 100%;\r\n        padding: 10% 20px;\r\n    }\r\n    .login h1{\r\n        margin-bottom: 30px;\r\n        text-align: center;\r\n        color: #409EFF;\r\n    }\r\n    .input{\r\n        max-width: 450px;\r\n        width: 100%;\r\n        margin: 0 auto;\r\n    }\r\n    .el-input{\r\n        margin-bottom: 30px;\r\n    }\r\n\t.el-link{\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n    .el-button{\r\n        width: 100%;\r\n    }\r\n\t.qr-dialog{\r\n\t\tmax-width: 450px;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.qr-dialog p{\r\n\t\ttext-align: center;\r\n\t}\n</style>\n"],"sourceRoot":"src/components"}]}