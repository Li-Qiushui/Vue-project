{"remainingRequest":"D:\\Project\\Wyy\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\Wyy\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Project\\Wyy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\Wyy\\src\\components\\Playlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Project\\Wyy\\src\\components\\Playlist.vue","mtime":1675081930840},{"path":"D:\\Project\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Project\\Wyy\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1653963798098},{"path":"D:\\Project\\Wyy\\node_modules\\babel-loader\\lib\\index.js","mtime":1653963802592},{"path":"D:\\Project\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Project\\Wyy\\node_modules\\vue-loader\\lib\\index.js","mtime":1653963801905}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bus from \"../Bus.js\";\nimport diskImg from '@/assets/disk.png';\nexport default {\n  name: 'playlist',\n  props: ['play'],\n  data: function data() {\n    return {\n      playlist: [],\n      i: '',\n      playing: '',\n      diskImgUrl: diskImg,\n      animation: ''\n    };\n  },\n  methods: {\n    playFun: function playFun(i, e) {\n      var main = this; //如果为无版权音乐则返回\n\n      if (e.currentTarget.classList.contains('noCopyright')) return false;\n      localStorage.playsongID = this.playlist[i].id;\n      localStorage.playlistID = window.playlistID;\n      var id = localStorage.playsongID;\n      this.axios.get(this.ApiURl + '/song/detail', {\n        params: {\n          ids: id,\n          cookie: this.cookie\n        }\n      }).then(function (res) {\n        main.song = res.data.songs[0];\n        Bus.$emit('song', main.song);\n        main.axios.get(main.ApiURl + '/song/url', {\n          params: {\n            id: id,\n            cookie: main.cookie\n          }\n        }).then(function (res) {\n          localStorage.playsongID = id;\n          window.playsongID = id;\n          main.$parent.play = true;\n          main.$parent.audio.src = res.data.data[0].url;\n          localStorage.setItem(\"played\", JSON.stringify(main.song));\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    var main = this;\n    main.cookie = localStorage.user;\n    var id = this.$route.query.id; //确定正在播放的音乐\n\n    this.playing = localStorage.playsongID;\n    window.playlistID = id;\n    if (!this.play) this.animation = 'paused';else this.animation = 'running';\n    this.user = JSON.parse(localStorage.user);\n    this.axios.get(this.ApiURl + '/playlist/track/all', {\n      params: {\n        id: id,\n        cookie: this.cookie\n      }\n    }).then(function (res) {\n      main.playlist = res.data.songs;\n      localStorage.setItem('playlist' + id, JSON.stringify(main.playlist));\n    });\n  },\n  watch: {\n    play: function play(_play) {\n      if (!_play) this.animation = 'paused';else this.animation = 'running';\n    }\n  }\n};",{"version":3,"sources":["Playlist.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"playlist\">\r\n        <div class=\"song\"\r\n            :class=\"{noCopyright:item.noCopyrightRcmd != undefined}\"\r\n            v-for=\"item,index in playlist\"\r\n            @click=\"playFun(index,$event)\">\r\n            <div class=\"num\">{{index+1}}.</div>\r\n            <div class=\"info\">\r\n                <p>{{item.name}}</p>\r\n                <p>\r\n                    <span v-for=\"s in item.ar\">{{s.name}}</span>\r\n                </p>\r\n            </div>\r\n            <div class=\"disk\" \r\n                v-if=\"item.id == playing\"\r\n                :style=\"{animationPlayState:animation}\">\r\n                <img :src=\"diskImgUrl\" >\r\n            </div>\r\n        </div>\r\n    </div>\n</template>\n\n<script>\r\n    import Bus from '../Bus.js'\r\n\timport diskImg from '@/assets/disk.png'\r\n    \r\n    export default{\r\n        name:'playlist',\r\n        props:['play'],\r\n        data(){\r\n            return{\r\n                playlist:[],\r\n                i:'',\r\n                playing:'',\r\n\t\t\t\tdiskImgUrl:diskImg,\r\n                animation:''\r\n                \r\n            }\r\n        },\r\n        methods:{\r\n            playFun(i,e){\r\n\t\t\t\tlet main = this\r\n                //如果为无版权音乐则返回\r\n                if(e.currentTarget\r\n                    .classList\r\n                    .contains('noCopyright')\r\n                ) return false;\r\n                localStorage.playsongID = this.playlist[i].id;\r\n                localStorage.playlistID = window.playlistID;\r\n\t\t\t\tlet id = localStorage.playsongID;\r\n\t\t\t\tthis.axios.get(this.ApiURl+'/song/detail',{\r\n\t\t\t\t    params:{\r\n\t\t\t\t        ids:id,\r\n\t\t\t\t        cookie:this.cookie\r\n\t\t\t\t    }\r\n\t\t\t\t}).then(function(res){\r\n\t\t\t\t    main.song = res.data.songs[0];\r\n\t\t\t\t    Bus.$emit('song',main.song);\r\n\t\t\t\t\tmain.axios.get(main.ApiURl+'/song/url',{\r\n\t\t\t\t\t    params:{\r\n\t\t\t\t\t        id:id,\r\n\t\t\t\t\t        cookie:main.cookie\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t}).then(function(res){\r\n\t\t\t\t\t    localStorage.playsongID = id;\r\n\t\t\t\t\t    window.playsongID = id;\r\n\t\t\t\t\t    main.$parent.play = true;\r\n\t\t\t\t\t    main.$parent.audio.src = res.data.data[0].url;\r\n\t\t\t\t\t    localStorage.setItem(\"played\",JSON.stringify(main.song));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n            }\r\n        },\r\n        mounted() {\r\n            const main = this;\r\n\t\t\tmain.cookie = localStorage.user\r\n            \r\n            let id = this.$route.query.id;\r\n            //确定正在播放的音乐\r\n            this.playing = localStorage.playsongID;\r\n            window.playlistID = id;\r\n            if(!this.play) this.animation = 'paused'\r\n            else this.animation = 'running';\r\n            \r\n            this.user = JSON.parse(localStorage.user)\r\n\r\n            \r\n            this.axios.get(this.ApiURl+'/playlist/track/all',{\r\n                params:{\r\n                    id:id,\r\n                    cookie:this.cookie\r\n                }\r\n            }).then(function(res){\r\n                main.playlist = res.data.songs;\r\n                localStorage.setItem('playlist'+id,JSON.stringify(main.playlist))\r\n            })\r\n        },\r\n        watch:{\r\n            play:function(play){\r\n                if(!play) this.animation = 'paused'\r\n                else this.animation = 'running';\r\n            }\r\n        }\r\n    }\n</script>\n\n<style>\r\n    .playlist{\r\n        width: 100%;\r\n        height: calc(100% - 50px);\r\n        padding: 5px;\r\n        overflow: hidden;\r\n        overflow-y: scroll;\r\n    }\r\n    .noCopyright *{\r\n        color: #ccc !important;\r\n    }\r\n    .noCopyright:active{\r\n        background-color: transparent !important;;\r\n    }\r\n    .song{\r\n        transition: .1s;\r\n        display: flex;\r\n        padding: 5px;\r\n        margin-bottom: 10px;\r\n    }\r\n    .song:active{\r\n        background-color: #d6d6d6;\r\n    }\r\n    .song .num{\r\n        width: 30px;\r\n        color: #666;\r\n        font-size: 14px;\r\n        text-align: center;\r\n        line-height: 30px;\r\n    }\r\n    .song .disk{\r\n        width: 26px;\r\n        height: 26px;\r\n        margin: 5px 0;\r\n        margin-left: auto;\r\n        animation: quan 2s linear infinite;\r\n    }\r\n    @keyframes quan{\r\n        0%{transform: rotate(0);}\r\n        50%{transform: rotate(180deg);}\r\n        100%{transform: rotate(360deg);}\r\n    }\r\n    .song .info{\r\n        width: calc(100% - 60px);\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n    }\r\n    .song .info p{\r\n        background-image: linear-gradient(\r\n            to left ,transparent, rgba(0, 0, 0, 1.0) 10%);\r\n        -webkit-background-clip: text;\r\n        color: transparent;\r\n        white-space: nowrap;\r\n        line-height: 20px;\r\n    }\r\n    .song .info p:last-child{\r\n        background-image: linear-gradient(\r\n            to left ,transparent, rgba(153, 153, 153, 1.0) 10%);\r\n    }\r\n    .song .info p:last-child span{\r\n        font-size: 14px;\r\n    }\r\n    .song .info p span::after{\r\n        content: ' / ';\r\n        color: #888;\r\n    }\r\n    .song .info p span:last-child::after{\r\n        content: '';\r\n    }\n</style>\n"],"sourceRoot":"src/components"}]}