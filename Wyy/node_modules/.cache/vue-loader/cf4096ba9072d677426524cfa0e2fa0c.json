{"remainingRequest":"D:\\Projects\\Wyy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\Wyy\\src\\components\\Login.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\Projects\\Wyy\\src\\components\\Login.vue","mtime":1675125681501},{"path":"D:\\Projects\\Wyy\\node_modules\\css-loader\\index.js","mtime":1653963796432},{"path":"D:\\Projects\\Wyy\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1653963801908},{"path":"D:\\Projects\\Wyy\\node_modules\\postcss-loader\\src\\index.js","mtime":1653963802495},{"path":"D:\\Projects\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Projects\\Wyy\\node_modules\\vue-loader\\lib\\index.js","mtime":1653963801905}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    .login{\n        width: 100%;\n\t\tmax-width: 450px;\n        height: 100%;\n        padding: 10% 20px;\n    }\n    .login h1{\n        margin-bottom: 30px;\n        text-align: center;\n        color: #409EFF;\n    }\n    .input{\n        max-width: 450px;\n        width: 100%;\n        margin: 0 auto;\n    }\n    .el-input{\n        margin-bottom: 30px;\n    }\n\t.el-link{\n\t\tmargin-bottom: 10px;\n\t}\n    .el-button{\n        width: 100%;\n    }\n\t.qr-dialog{\n\t\tmax-width: 450px;\n\t\twidth: 100%;\n\t}\n\t.qr-dialog p{\n\t\ttext-align: center;\n\t}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"login\">\r\n        <h1>Login</h1>\r\n        <div class=\"input\">\r\n            <el-input placeholder=\"输入手机号\" v-model=\"input.phone\"></el-input>\r\n            <el-input placeholder=\"输入密码\" v-model=\"input.password\" show-password></el-input>\r\n\t\t\t<el-link type=\"primary\" @click=\"Qrlogin()\">二维码登录</el-link>\r\n            <el-button type=\"primary\" @click=\"login()\">登录</el-button>\r\n        </div>\r\n\t\t<el-dialog\r\n\t\t  title=\"扫码登录\"\r\n\t\t  :visible.sync=\"qrdialog\"\r\n\t\t  @close=\"Closedialog\"\r\n\t\t  width=\"50%\"\r\n\t\t  custom-class=\"qr-dialog\"\r\n\t\t  center>\r\n\t\t  <img :src=\"QrimgUrl\" >\r\n\t\t  <p>{{loginStatus}} </p>\r\n\t\t</el-dialog>\r\n        <p v-if=\"message != ''\">{{message}}</p>\r\n    </div>\n</template>\n\n<script>\r\n    export default{\r\n        name:\"Login\",\r\n        data(){\r\n            return{\r\n                input:{\r\n                    phone:'',\r\n                    password:''\r\n                },\r\n\t\t\t\tQrimgUrl:'',\r\n                message:'',\r\n\t\t\t\tqrdialog:false,\r\n\t\t\t\tloginStatus:\"  \"\r\n            }\r\n        },\r\n        mounted() {\r\n            if(localStorage.user){\r\n                this.$router.push('./')\r\n            }\r\n        },\r\n        methods:{\r\n            login:function(v){\r\n                if(!window.localStorage){\r\n                    alert(\"请更新浏览器\");\r\n                    return false;\r\n                }\r\n                let main = this;\r\n                if(this.input.phone == '' || this.input.password == ''){\r\n                    this.$message({\r\n                        message:'请完成输入',\r\n                        type:'warning' \r\n                    })\r\n                }else{\r\n                    this.axios.get(`${this.ApiURl}/login/cellphone`,{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t    phone:this.input.phone,\r\n\t\t\t\t\t\t    password:this.input.password\r\n\t\t\t\t\t\t}\r\n                    }).then(function(res){\r\n                        console.log(res.data);\r\n                        const data = res.data;\r\n                        main.message = data.message;\r\n                        if(data.code != 200) return false;\r\n                        \r\n                        localStorage.setItem(\"user\",JSON.stringify(data.cookie));\r\n                        main.$router.push('./');\r\n                    }).catch(function(res){})\r\n                }\r\n            },\r\n\t\t\tQrlogin:function(){\r\n\t\t\t\tlet main = this;\r\n\t\t\t\tlet timestamp1 = Date.parse(new Date())\r\n\t\t\t\tthis.axios.get(`${this.ApiURl}/login/qr/key`,{\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\ttime:timestamp1\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\tlet qrkey = res.data.data.unikey;\r\n\t\t\t\t\tmain.axios.get(`${main.ApiURl}/login/qr/create`,{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t    key:qrkey,\r\n\t\t\t\t\t\t\tqrimg:1,\r\n\t\t\t\t\t\t\ttime:timestamp1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\tmain.qrdialog = true\r\n\t\t\t\t\t\t\tmain.QrimgUrl = res.data.data.qrimg\r\n\t\t\t\t\t\t\tmain.Interval = setInterval(function() {\r\n\t\t\t\t\t\t\t\tlet timestamp1 = Date.parse(new Date())\r\n\t\t\t\t\t\t\t\tmain.axios.get(`${main.ApiURl}/login/qr/check`,{\r\n\t\t\t\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\t\t\t    key:qrkey,\r\n\t\t\t\t\t\t\t\t\t\ttime:timestamp1\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\t\t\t\t\tlet code = res.data.code;\r\n\t\t\t\t\t\t\t\t\tif(code == 801){\r\n\t\t\t\t\t\t\t\t\t\tmain.loginStatus = res.data.message\r\n\t\t\t\t\t\t\t\t\t}else if(code == 802){\r\n\t\t\t\t\t\t\t\t\t\tmain.loginStatus = res.data.message\r\n\t\t\t\t\t\t\t\t\t}if(code == 803){\r\n\t\t\t\t\t\t\t\t\t\tmain.loginStatus = res.data.message\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"user\",JSON.stringify(res.data.cookie));\r\n\t\t\t\t\t\t\t\t\t\tclearInterval(main.Interval)\r\n\t\t\t\t\t\t\t\t\t\tmain.$router.push('./');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tconsole.log(main.loginStatus)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tClosedialog:function(){\r\n\t\t\t\tclearInterval(this.Interval)\r\n\t\t\t}\r\n        }\r\n    }\n</script>\n\n<style>\r\n    .login{\r\n        width: 100%;\r\n\t\tmax-width: 450px;\r\n        height: 100%;\r\n        padding: 10% 20px;\r\n    }\r\n    .login h1{\r\n        margin-bottom: 30px;\r\n        text-align: center;\r\n        color: #409EFF;\r\n    }\r\n    .input{\r\n        max-width: 450px;\r\n        width: 100%;\r\n        margin: 0 auto;\r\n    }\r\n    .el-input{\r\n        margin-bottom: 30px;\r\n    }\r\n\t.el-link{\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n    .el-button{\r\n        width: 100%;\r\n    }\r\n\t.qr-dialog{\r\n\t\tmax-width: 450px;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.qr-dialog p{\r\n\t\ttext-align: center;\r\n\t}\n</style>\n"]}]}