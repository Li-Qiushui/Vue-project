{"remainingRequest":"D:\\Projects\\Wyy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\Wyy\\src\\components\\Play.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\Projects\\Wyy\\src\\components\\Play.vue","mtime":1663663460455},{"path":"D:\\Projects\\Wyy\\node_modules\\css-loader\\index.js","mtime":1653963796432},{"path":"D:\\Projects\\Wyy\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1653963801908},{"path":"D:\\Projects\\Wyy\\node_modules\\postcss-loader\\src\\index.js","mtime":1653963802495},{"path":"D:\\Projects\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Projects\\Wyy\\node_modules\\vue-loader\\lib\\index.js","mtime":1653963801905}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    .play{\n        position: relative;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n    \n    .play .cover{\n        position: relative;\n        z-index: 1;\n\t\twidth: 60%;\n\t\theight: 0;\n\t\tpadding-bottom: 60%;\n        margin: 10% auto;\n    }\n    .play .cover img{\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tborder-radius: 5%;\n\t\tmargin: 0 auto;\n        box-shadow: 0 0 20px #aaaaaa;\n    }\n\t.name{\n\t\ttext-align: center;\n\t\tmargin-bottom: 10px;\n\t}\n    .slider{\n        position: relative;\n        z-index: 1;\n    }\n    .el-slider .el-slider__runway{\n        height: 3px;\n        margin: 0;\n\t\tbackground-color: #f3f3f3;\n    }\n    .el-slider .el-slider__bar{\n        height: 3px;\n\t\tbackground-color: #333333;\n    }\n    .el-slider .el-slider__button{\n        width: 38px;\n        height: 38px;\n        border: none;\n        background-color: transparent;\n    }\n    .el-slider__button-wrapper{\n        top: -16px;\n    }\n    .timer{\n        position: relative;\n        z-index: 2;\n        margin: 10px 0;\n        text-align: center;\n        color: #0f0f0f;\n    }\n    \n    .playBtn{\n        position: absolute;\n        bottom: 10%;\n        z-index: 2;\n        width: 100%;\n\t\theight: 50px;\n        display: flex;\n        justify-content: space-around;\n        padding: 0 10%;\n        margin: 30px 0;\n        color: #FFF;\n    }\n    .playBtn .openBtn{\n        width: 50px;\n        height: 50px;\n    }\n    .playBtn .songBtn{\n\t\twidth: 40px;\n\t\theight: 100%;\n\t\tpadding: 15px 0;\n\t}\n    .playBtn .songBtn img{\n\t\tdisplay: block;\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tmargin: 0 auto;\n\t}\n    \n    \n    .bgImg{\n        transform: scale(1.08);\n        position: absolute;\n        z-index: 0;\n        top: 0;\n        height: 100%;\n        filter: blur(10px);\n    }\n    \n",{"version":3,"sources":["Play.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2NA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Play.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"play\">\r\n        <div class=\"cover\">\r\n\t\t\t<img :src=\"song.al.picUrl\" >\r\n        </div>\r\n\t\t<div class=\"name\">\r\n\t\t\t<p v-text=\"song.name\"></p>\r\n\t\t</div>\r\n        <div class=\"slider\"\r\n            @mousedown=\"ChangeFun(true)\"\r\n            @touchstart=\"ChangeFun(true)\"\r\n            >\r\n            <el-slider\r\n                v-model=\"slider\"\r\n                @change=\"sliderFun\"\r\n                @input=\"sliderTimer\"\r\n                :show-tooltip=\"false\" ></el-slider>\r\n        </div>\r\n        <div class=\"timer\">\r\n            <span>{{timer.s}}</span> / <span>{{timer.e}}</span>\r\n        </div>\r\n        <div class=\"playBtn\">\r\n\t\t\t<div class=\"songBtn\" @click=\"songSwitch(false)\">\r\n\t\t\t\t<img :src=\"UpperImgUrl\">\r\n\t\t\t</div>\r\n            <openBtn @click.native=\"audioPlay\" :isBtn=\"$parent.play\"></openBtn>\r\n\t\t\t<div class=\"songBtn\" @click=\"songSwitch(true)\">\r\n\t\t\t\t<img :src=\"NextImgUrl\">\r\n\t\t\t</div>\r\n        </div>\r\n    </div>\r\n    \n</template>\n\n<script>\r\n    import Bus from \"../Bus.js\"\r\n    import openBtn from '../icons/openBtn'\r\n    import NextImgUrl from '@/assets/Next.svg'\r\n    import UpperImgUrl from '@/assets/Upper.svg'\r\n    \r\n    export default{\r\n        name:'Play',\r\n        props:['play'],\r\n        components:{\r\n          openBtn,\r\n        },\r\n        data(){\r\n            return{\r\n                song:{al:''},\r\n                slider:0,\r\n                timer:{\r\n                    s:\"00:00\",\r\n                    e:\"00:00\"\r\n                },\r\n\t\t\t\tNextImgUrl,\r\n\t\t\t\tUpperImgUrl\r\n             }  \r\n        },\r\n        mounted() {\r\n            const main = this;\r\n            \r\n            if(!this.$parent.audio){\r\n                this.$router.go(-1)\r\n                return false\r\n            }\r\n            Bus.$on(\"song\",function(song){\r\n                main.song = song;\r\n            })\r\n            let playlistID = localStorage.playlistID;\r\n            let playlist = localStorage.getItem(\"playlist\"+playlistID);\r\n            if(playlist){\r\n                playlist = JSON.parse(playlist);\r\n                let time = playlist[0].time;\r\n                this.playlist = playlist;\r\n                this.$parent.playlist = playlist;\r\n                let playsongID = localStorage.playsongID;\r\n                for (let i in playlist) {\r\n                    if(playlist[i].id == playsongID){\r\n                        this.$parent.playlist[0].index = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\t\t\t\r\n            let id = localStorage.playsongID;\r\n            let index = this.$parent.playlist[0].index;\r\n            if(id == undefined) return false;\r\n            \r\n            this.user = JSON.parse(localStorage.user)\r\n            Bus.$emit('playing',id);\r\n            \r\n            this.$parent.play = !this.$parent.audio.paused;\r\n            this.axios.get(this.ApiURl+'/song/detail',{\r\n                params:{\r\n                    ids:id,\r\n                    cookie:this.user.cookie\r\n                }\r\n            }).then(function(res){\r\n                main.song = res.data.songs[0];\r\n                Bus.$emit('song',main.song);\r\n                \r\n                let time = new Date(main.song.dt);\r\n                let M = time.getMinutes();\r\n                let S = time.getSeconds();\r\n                M = (M < 10) ? \"0\"+M : M;\r\n                S = (S < 10) ? \"0\"+S : S;\r\n                main.timer.e = M +':'+S;\r\n\t\t\t\t\r\n                if(localStorage.playsongID == window.playsongID) {\r\n\t\t\t\t\t return false;\r\n\t\t\t\t}\r\n                main.axios.get(main.ApiURl+'/song/url',{\r\n                    params:{\r\n                        id:id,\r\n                        cookie:main.user.cookie\r\n                    }\r\n                }).then(function(res){\r\n                    localStorage.playsongID = id;\r\n                    window.playsongID = id;\r\n                    main.$parent.play = true;\r\n                    main.$parent.audio.src = res.data.data[0].url;\r\n                    localStorage.setItem(\"played\",JSON.stringify(main.song));\r\n                })\r\n            })\r\n        },\r\n        methods:{\r\n            sliderFun(){//滑动条触发时执行\r\n                let slider = this.slider*this.song.dt/100000;\r\n                this.$parent.audio.currentTime = slider;\r\n                this.isChange = false;\r\n            },\r\n            durationUpdate(){//根据播放进度更改滑动条\r\n                if (this.isChange === true){\r\n                     return false;\r\n                }\r\n                let cTime = Math.floor(this.$parent.audio.currentTime);\r\n                this.slider = cTime/(this.song.dt/1000)*100;\r\n            },\r\n            sliderTimer(){\r\n                let cTime = this.song.dt*this.slider/100000;\r\n                if(isNaN(cTime)) return;\r\n                cTime = Math.round(cTime);\r\n                let S = cTime%60;\r\n                let M = Math.round(cTime/60);\r\n                S = (S < 10) ? '0' + S : S;\r\n                M = (M < 10) ? '0' + M : M;\r\n                this.timer.s = M+\":\"+S\r\n            },\r\n            audioPlay(){\r\n                let paused = this.$parent.audio.paused;\r\n                if(paused){\r\n                    this.$parent.audio.play();\r\n                }else{\r\n                    this.$parent.audio.pause();\r\n                }\r\n                this.$parent.play = paused;\r\n                this.song.play = paused;\r\n            },\r\n            songSwitch(toggle){\r\n                let playlist = this.$parent.playlist;\r\n                let index = playlist[0].index;\r\n                if(toggle){\r\n                    index++;\r\n                    if(index == playlist.length){\r\n                        index = 0;\r\n                    }\r\n                    if(playlist[index].noCopyrightRcmd){\r\n                        index++;\r\n                    }\r\n                }else{\r\n                    index--;\r\n                    if(index == -1){\r\n                        index = playlist.length-1;\r\n                    }\r\n                    if(playlist[index].noCopyrightRcmd){\r\n                        index--;\r\n                    }\r\n                }\r\n                playlist[0].index = index;\r\n                \r\n                const main = this;\r\n                this.axios.get(this.ApiURl+'/song/detail',{\r\n                    params:{\r\n                        ids:playlist[index].id,\r\n                        cookie:this.user.cookie\r\n                    }\r\n                }).then(function(res){\r\n                    main.song = res.data.songs[0];\r\n                    Bus.$emit('song',main.song);\r\n                    \r\n                    let time = new Date(main.song.dt);\r\n                    let M = time.getMinutes();\r\n                    let S = time.getSeconds();\r\n                    M = (M < 10) ? \"0\"+M : M;\r\n                    S = (S < 10) ? \"0\"+S : S;\r\n                    main.timer.e = M +':'+S\r\n                    \r\n                    main.axios.get(main.ApiURl+'/song/url',{\r\n                        params:{\r\n                            id:playlist[index].id, \r\n                            cookie:main.user.cookie\r\n                        }\r\n                    }).then(function(res){\r\n                        window.playsongID = playlist[index].id;\r\n                        localStorage.playsongID = playlist[index].id;\r\n                        main.$parent.play = true;\r\n                        main.$parent.audio.src = res.data.data[0].url;\r\n                        localStorage.setItem(\"played\",JSON.stringify(main.song));\r\n                    })\r\n                })\r\n            },\r\n            ChangeFun(b){\r\n                this.isChange = b;\r\n            }\r\n        }\r\n    }\n</script>\n\n<style>\r\n    .play{\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n    }\r\n    \r\n    .play .cover{\r\n        position: relative;\r\n        z-index: 1;\r\n\t\twidth: 60%;\r\n\t\theight: 0;\r\n\t\tpadding-bottom: 60%;\r\n        margin: 10% auto;\r\n    }\r\n    .play .cover img{\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 5%;\r\n\t\tmargin: 0 auto;\r\n        box-shadow: 0 0 20px #aaaaaa;\r\n    }\r\n\t.name{\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n    .slider{\r\n        position: relative;\r\n        z-index: 1;\r\n    }\r\n    .el-slider .el-slider__runway{\r\n        height: 3px;\r\n        margin: 0;\r\n\t\tbackground-color: #f3f3f3;\r\n    }\r\n    .el-slider .el-slider__bar{\r\n        height: 3px;\r\n\t\tbackground-color: #333333;\r\n    }\r\n    .el-slider .el-slider__button{\r\n        width: 38px;\r\n        height: 38px;\r\n        border: none;\r\n        background-color: transparent;\r\n    }\r\n    .el-slider__button-wrapper{\r\n        top: -16px;\r\n    }\r\n    .timer{\r\n        position: relative;\r\n        z-index: 2;\r\n        margin: 10px 0;\r\n        text-align: center;\r\n        color: #0f0f0f;\r\n    }\r\n    \r\n    .playBtn{\r\n        position: absolute;\r\n        bottom: 10%;\r\n        z-index: 2;\r\n        width: 100%;\r\n\t\theight: 50px;\r\n        display: flex;\r\n        justify-content: space-around;\r\n        padding: 0 10%;\r\n        margin: 30px 0;\r\n        color: #FFF;\r\n    }\r\n    .playBtn .openBtn{\r\n        width: 50px;\r\n        height: 50px;\r\n    }\r\n    .playBtn .songBtn{\r\n\t\twidth: 40px;\r\n\t\theight: 100%;\r\n\t\tpadding: 15px 0;\r\n\t}\r\n    .playBtn .songBtn img{\r\n\t\tdisplay: block;\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n    \r\n    \r\n    .bgImg{\r\n        transform: scale(1.08);\r\n        position: absolute;\r\n        z-index: 0;\r\n        top: 0;\r\n        height: 100%;\r\n        filter: blur(10px);\r\n    }\r\n    \n</style>\n"]}]}