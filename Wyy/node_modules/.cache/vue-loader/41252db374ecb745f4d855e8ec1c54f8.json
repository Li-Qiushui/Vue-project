{"remainingRequest":"D:\\Projects-Vue\\Wyy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects-Vue\\Wyy\\src\\components\\Playlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects-Vue\\Wyy\\src\\components\\Playlist.vue","mtime":1676809718238},{"path":"D:\\Projects-Vue\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Projects-Vue\\Wyy\\node_modules\\babel-loader\\lib\\index.js","mtime":1653963802592},{"path":"D:\\Projects-Vue\\Wyy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653963798725},{"path":"D:\\Projects-Vue\\Wyy\\node_modules\\vue-loader\\lib\\index.js","mtime":1653963801905}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import Bus from '../Bus.js'\n\timport diskImg from '@/assets/disk.png'\n    \n    export default{\n        name:'playlist',\n        props:['play'],\n        data(){\n            return{\n                playlist:[],\n                i:'',\n                playing:'',\n\t\t\t\tdiskImgUrl:diskImg,\n                animation:''\n                \n            }\n        },\n        methods:{\n            playFun(i,e){\n\t\t\t\tlet main = this\n                //如果为无版权音乐则返回\n                if(e.currentTarget\n                    .classList\n                    .contains('noCopyright')\n                ) return false;\n                localStorage.playsongID = this.playlist[i].id;\n                localStorage.playlistID = window.playlistID;\n\t\t\t\tlet id = localStorage.playsongID;\n\t\t\t\tthis.axios.get(this.ApiURl+'/song/detail',{\n\t\t\t\t    params:{\n\t\t\t\t        ids:id,\n\t\t\t\t        cookie:this.cookie\n\t\t\t\t    }\n\t\t\t\t}).then(function(res){\n\t\t\t\t    main.song = res.data.songs[0];\n\t\t\t\t    Bus.$emit('song',main.song);\n\t\t\t\t\tmain.playing = main.song.id;\n\t\t\t\t\tmain.axios.get(main.ApiURl+'/song/url',{\n\t\t\t\t\t    params:{\n\t\t\t\t\t        id:id,\n\t\t\t\t\t        cookie:main.cookie\n\t\t\t\t\t    }\n\t\t\t\t\t}).then(function(res){\n\t\t\t\t\t    localStorage.playsongID = id;\n\t\t\t\t\t    window.playsongID = id;\n\t\t\t\t\t    main.$parent.play = true;\n\t\t\t\t\t    main.$parent.audio.src = res.data.data[0].url;\n\t\t\t\t\t    localStorage.setItem(\"played\",JSON.stringify(main.song));\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t})\n            }\n        },\n        mounted() {\n            const main = this;\n\t\t\tmain.cookie = localStorage.user\n            \n            let id = this.$route.query.id;\n            //确定正在播放的音乐\n            this.playing = localStorage.playsongID;\n            window.playlistID = id;\n            if(!this.play) this.animation = 'paused'\n            else this.animation = 'running';\n            \n            this.user = JSON.parse(localStorage.user)\n\n            \n            this.axios.get(this.ApiURl+'/playlist/track/all',{\n                params:{\n                    id:id,\n                    cookie:this.cookie\n                }\n            }).then(function(res){\n                main.playlist = res.data.songs;\n                localStorage.setItem('playlist'+id,JSON.stringify(main.playlist))\n            })\n        },\n        watch:{\n            play:function(play){\n                if(!play) this.animation = 'paused'\n                else this.animation = 'running';\n            }\n        }\n    }\n",{"version":3,"sources":["Playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Playlist.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"playlist\">\r\n        <div class=\"song\"\r\n            :class=\"{noCopyright:item.noCopyrightRcmd != undefined}\"\r\n            v-for=\"item,index in playlist\"\r\n            @click=\"playFun(index,$event)\">\r\n            <div class=\"num\">{{index+1}}.</div>\r\n            <div class=\"info\">\r\n                <p>{{item.name}}</p>\r\n                <p>\r\n                    <span v-for=\"s in item.ar\">{{s.name}}</span>\r\n                </p>\r\n            </div>\r\n            <div class=\"disk\" \r\n                v-if=\"item.id == playing\"\r\n                :style=\"{animationPlayState:animation}\">\r\n                <img :src=\"diskImgUrl\" >\r\n            </div>\r\n        </div>\r\n    </div>\n</template>\n\n<script>\r\n    import Bus from '../Bus.js'\r\n\timport diskImg from '@/assets/disk.png'\r\n    \r\n    export default{\r\n        name:'playlist',\r\n        props:['play'],\r\n        data(){\r\n            return{\r\n                playlist:[],\r\n                i:'',\r\n                playing:'',\r\n\t\t\t\tdiskImgUrl:diskImg,\r\n                animation:''\r\n                \r\n            }\r\n        },\r\n        methods:{\r\n            playFun(i,e){\r\n\t\t\t\tlet main = this\r\n                //如果为无版权音乐则返回\r\n                if(e.currentTarget\r\n                    .classList\r\n                    .contains('noCopyright')\r\n                ) return false;\r\n                localStorage.playsongID = this.playlist[i].id;\r\n                localStorage.playlistID = window.playlistID;\r\n\t\t\t\tlet id = localStorage.playsongID;\r\n\t\t\t\tthis.axios.get(this.ApiURl+'/song/detail',{\r\n\t\t\t\t    params:{\r\n\t\t\t\t        ids:id,\r\n\t\t\t\t        cookie:this.cookie\r\n\t\t\t\t    }\r\n\t\t\t\t}).then(function(res){\r\n\t\t\t\t    main.song = res.data.songs[0];\r\n\t\t\t\t    Bus.$emit('song',main.song);\r\n\t\t\t\t\tmain.playing = main.song.id;\r\n\t\t\t\t\tmain.axios.get(main.ApiURl+'/song/url',{\r\n\t\t\t\t\t    params:{\r\n\t\t\t\t\t        id:id,\r\n\t\t\t\t\t        cookie:main.cookie\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t}).then(function(res){\r\n\t\t\t\t\t    localStorage.playsongID = id;\r\n\t\t\t\t\t    window.playsongID = id;\r\n\t\t\t\t\t    main.$parent.play = true;\r\n\t\t\t\t\t    main.$parent.audio.src = res.data.data[0].url;\r\n\t\t\t\t\t    localStorage.setItem(\"played\",JSON.stringify(main.song));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n            }\r\n        },\r\n        mounted() {\r\n            const main = this;\r\n\t\t\tmain.cookie = localStorage.user\r\n            \r\n            let id = this.$route.query.id;\r\n            //确定正在播放的音乐\r\n            this.playing = localStorage.playsongID;\r\n            window.playlistID = id;\r\n            if(!this.play) this.animation = 'paused'\r\n            else this.animation = 'running';\r\n            \r\n            this.user = JSON.parse(localStorage.user)\r\n\r\n            \r\n            this.axios.get(this.ApiURl+'/playlist/track/all',{\r\n                params:{\r\n                    id:id,\r\n                    cookie:this.cookie\r\n                }\r\n            }).then(function(res){\r\n                main.playlist = res.data.songs;\r\n                localStorage.setItem('playlist'+id,JSON.stringify(main.playlist))\r\n            })\r\n        },\r\n        watch:{\r\n            play:function(play){\r\n                if(!play) this.animation = 'paused'\r\n                else this.animation = 'running';\r\n            }\r\n        }\r\n    }\n</script>\n\n<style>\r\n    .playlist{\r\n        width: 100%;\r\n        height: 100%;\r\n        padding: 5px;\r\n        overflow: hidden;\r\n        overflow-y: scroll;\r\n    }\r\n    .noCopyright *{\r\n        color: #ccc !important;\r\n    }\r\n    .noCopyright:active{\r\n        background-color: transparent !important;;\r\n    }\r\n    .song{\r\n        transition: .1s;\r\n        display: flex;\r\n        padding: 5px;\r\n        margin-bottom: 10px;\r\n    }\r\n    .song:active{\r\n        background-color: #d6d6d6;\r\n    }\r\n    .song .num{\r\n        width: 30px;\r\n        color: #666;\r\n        font-size: 14px;\r\n        text-align: center;\r\n        line-height: 30px;\r\n    }\r\n    .song .disk{\r\n        width: 26px;\r\n        height: 26px;\r\n        margin: 5px 0;\r\n        margin-left: auto;\r\n        animation: quan 2s linear infinite;\r\n    }\r\n    @keyframes quan{\r\n        0%{transform: rotate(0);}\r\n        50%{transform: rotate(180deg);}\r\n        100%{transform: rotate(360deg);}\r\n    }\r\n    .song .info{\r\n        width: calc(100% - 60px);\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n    }\r\n    .song .info p{\r\n        background-image: linear-gradient(\r\n            to left ,transparent, rgba(0, 0, 0, 1.0) 10%);\r\n        -webkit-background-clip: text;\r\n        color: transparent;\r\n        white-space: nowrap;\r\n        line-height: 20px;\r\n    }\r\n    .song .info p:last-child{\r\n        background-image: linear-gradient(\r\n            to left ,transparent, rgba(153, 153, 153, 1.0) 10%);\r\n    }\r\n    .song .info p:last-child span{\r\n        font-size: 14px;\r\n    }\r\n    .song .info p span::after{\r\n        content: ' / ';\r\n        color: #888;\r\n    }\r\n    .song .info p span:last-child::after{\r\n        content: '';\r\n    }\n</style>\n"]}]}